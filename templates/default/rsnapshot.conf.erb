# rsnapshot server configuration
#
# This config file was automatically created by Chef.
# All manual changes are going to be overridden.
#
# Source: rsnapshot::templates/default/rsnapshot.conf.erb
#
# This file requires tabs between elements
#
# Directories require a trailing slash:
#   right: /home/
#   wrong: /home

config_version	1.2

<% node['rsnapshot']['server']['config'].sort.each do |key, value| %>
<% next if value.nil? %>
<% Array(value).each do |v| %>
<%= key %>	<%= v %>
<% end %>
<% end %>

#############################################################################
# BACKUP INTERVALS

<% node['rsnapshot']['server']['retain'].each do |interval| %>
<% next unless node['rsnapshot']['server']['intervals'][interval.to_s]['keep'].to_i > 0 %>
retain	<%= interval %>	<%= node['rsnapshot']['server']['intervals'][interval.to_s]['keep'].to_i %>
<% end %>

#############################################################################
# BACKUP TARGETS

<% @backup_targets.each do |target| %>
backup	<%= target %>
<% end %>
